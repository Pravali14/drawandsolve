o
    Â·Å’Â¸f1  Ã£                   @   sÂ¸   d dl Z d dlZd dlZd dlmZ d dl mZ d dl	m
Z
 d dl
mZ d dl
mZ d d lmZ d dlmZ d d	lmZ d d
lmZ d dlZG d
dâ€ dÆ’Zed
krZeÆ’ ZeÂ Â¡  dS dS )Ã©    N)ÃšHandDetector)Ãš
VolumeControl)ÃšVirtualPainter)ÃšPresentationController)ÃšPongGame)ÃšVirtualMouse)Ãš
HandGestureAI)ÃšVirtualKeyboard)ÃšArmCurlsCounterc                   @   sF   e Zd Zddâ€ Zddâ€ Zddâ€ Zd dâ€ Zd	d
â€ Z d
dâ€ Zdddâ€Z	d
S )ÃšCVAppc                 C   sÂª   t Â dÂ¡| _| jÂ ddÂ¡ | jÂ ddÂ¡ d}td dÂ| _tÆ’ | _ tÆ’ | _	t
Æ’ | _
tÆ’ | _
tÆ’ | _t|Æ’| _tÆ’ | _tÆ’ | _d	| _d	| _t Â d
t jÂ¡| _t Â | jd
Â¡| _d S )Nr   Ã©   i   Ã©   iÃ  Z'AIzaSyBLoq2qPnvxqfGfyqZb2ifo202nkcPPKKAÃ©   )ÃšmaxHandsFzGC:\Users\bhush\OneDrive\Desktop\PAVAN\Projects\CV_Desktop\MenuIcon2.png)Ã©(   r   )Ãšcv2ÃšVideoCaptureÃšcamÃšsetÃšhdÃšdetectorr   Ãš
vol_controlr   Ãš	vir_paintr   Ãš
present_appr    Ãš	vir_mouser   Ãš	pong_gamer   Ãš math_air	   Ãšvir_keyboardr
   ÃšfitÃšoverÃšshow_optionsÃšimreadÃšIMREAD_UNCHANGEDÃšicon_imgÃšresize)ÃšselfÃš api_keyÂ© r'   ÃºPC:\Users\bhush\OneDrive\Desktop\PAVAN\Projects\CV_Desktop\Home_Page\home_page.pyÃš__init__   s"   
zCVApp.__init__c              	   C   sx  t Â  Â¡ }d}d}t Â  Â¡ | |k rÂ±| jÂ Â¡ \}}|sqtÂ |dÂ¡}tt Â  Â¡ | | d Æ’d }t Â  Â¡ | d tj  } tÂ |d dd	d
Â¡ tÂ |d |d
fd	dÂ¡ tÂ ||d
f|d dfddÂ¡ d}d}	t|d |	tÂ 	| Â¡  Æ’}
t|d |	tÂ 
| Â¡  Æ’}
tÂ 
|||	ddÂ¡ tÂ 
||
|
fdddÂ¡ tÂ |ddtj
dddÂ¡  tÂ d|Â¡ tÂ dÂ¡ |sÂ©d}t Â  Â¡ | |k s|rÂºtÂ dÂ¡ d S d S )Nr   Fr   Ã©   Ã©â€“   Ã©   )r+   Ã©,  )iÂ¶  Ã©Â  )r   Ã©Ã¿   r   Ã©   r.   Ã©Ã¿Ã¿Ã¿Ã¿i'  Ã©
   iâ€¢  )r   r/   r/   )i&  Ã©Ãº   Ã©   r   Â©r   r   r/   )r/   r   r   z
Loading...)Ã©Ã´  iÃ‚  Â©r/   r/   r/   Z LoadingT)Ãštimer   Ãšreadr   ÃšflipÃšintÃšnpÃšpiÃš	rectangleÃšcosÃšsinÃšcircleÃš putTextÃšFONT_HERSHEY_SIMPLEXÃšimshowÃš waitKeyÃš
destroyWindow)r%   Ãš
start_timeZ
load_durationZwindow_createdÃšretÃšimgÃšprogressÃšangleÃšcenterÃšradiusZcircle_xZcircle_yr'   r'   r(   Ãš loading'   s8   
Ã¢!Ã¿z
CVApp.loadingc              
   C   sÂ¤  g dÂ¢}|D ]Ã‰\}}}}} }t jÂ |Â¡rÅ¡tÂ |tjÂ¡}	|	d urâ€¦tÂ |	|| || fÂ¡}	|	j d dkrz|	d d â€¦d d â€¦df }
|	d d â€¦d d â€¦ddâ€¦f }	|||â€¦||â€¦f }
tÂ |
Â¡}tj	|
|
|dÂ}
tj	|	|	|
dÂ}tÂ 
|
|Â¡}||||â€¦||â€¦f< qÂ®|	|||â€¦||â€¦f< qÂ®t
d |â€º ÂÆ’ tÂ |||f||fdd	Â¡ nt
d
|â€º ÂÆ’ tÂ |||f||fdd	Â¡ | Â 
Â¡ }t|Æ’D ]\}}tÂ ||||d
 |d  ftjdd
dÂ¡  qÂ¶q|S )N) )Ã©d   rO   Ã©Ãˆ   rP   zVolume ControlzEC:\Users\bhush\OneDrive\Desktop\PAVAN\Projects\CV_Desktop\Volume+.png)r-   rO   r.   rP   z	Paint AppzFC:\Users\bhush\OneDrive\Desktop\PAVAN\Projects\CV_Desktop\PaintApp.png)r6   rO   Ã©X  rP   z
Math AI AppzDC:\Users\bhush\OneDrive\Desktop\PAVAN\Projects\CV_Desktop\MathAI.png)Ã©Â¼  rO   r*   rP   zPresentation AppzNC:\Users\bhush\OneDrive\Desktop\PAVAN\Projects\CV_Desktop\PresentationLogo.png)rO   r-   rP   r.   z	Pong GamezFC:\Users\bhush\OneDrive\Desktop\PAVAN\Projects\CV_Desktop\PONGGame.png)r-   r-   r.   r.   z
Virtual MousezJC:\Users\bhush\OneDrive\Desktop\PAVAN\Projects\CV_Desktop\VirtualMouse.png)r6   r-   rQ   r.   zFitness TrackerzLC:\Users\bhush\OneDrive\Desktop\PAVAN\Projects\CV_Desktop\FitnessTracker.pngr,   r
   r   r   )ÃšmaskzFailed to load image: )r   r   r   r1   zImage file not found: r4   r   r7   )ÃšosÃšpathÃšexistsr   r!   r"   r$   ÃšshapeÃš
bitwise_notÃš
bitwise_andÃšaddÃšprintr>   ÃšsplitÃš	enumeraterB   ÃšFONT_HERSHEY_PLAIN)r%   rI   Z buttonsÃšx1Ãšy1Ãšx2Ãšy2ÃšlabelZ	icon_pathÃšiconrS   ÃšroiZmask_invZimg_bgZ icon_fgÃšdstÃšlinesÃšiÃšliner'   r'   r(   Ãšdraw_interfaceP   s2   

*Ã¿zCVApp.draw_interfacec              	   C   s~   |Â  Â¡ }tÂ |dtÂ |j|jÂ¡ddÂ¡}tÂ  |dddd Â¡ tÂ |dd	tj	d
d
dÂ¡  tÂ |d
dtj	d
d
dÂ¡  tÂ |d|ddÂ¡}|S )Ng333333Ã“?gffffffÃ¦?r   )Ã©â€  rO   )Ã©Ã¢  r-   )Ã©2   rm   rm   r1   z
Create File)Ã©Ëœ  r+   r   r7   r,   ZLogOut)rn   r3   )
Ãšcopyr   Ãš
addWeightedr<   ÃšzerosrW   Ãšdtyper>   rB   rC   )r%   rI   Ãš overlayr'   r'   r(   Ãšdraw_optionsÅ’   s   zCVApp.draw_optionsc                 C   s   t Â Â¡  | jÂ |Â¡ d S Â©N)r   ÃšdestroyAllWindowsr   Zadd_content_to_file)r%   r   r'   r'   r(   Ãš
create_fileÅ“   s   zCVApp.create_filec                 C   sr  |j d dkrtÂ |tjÂ¡}|j d dkrtÂ |tjÂ¡}|j \}}} |j \}}	}
||	 |ks4|| |kr8tdÆ’â€š|||| â€¦|||	 â€¦f }
|j d dkrTtÂ |tjÂ¡}|j d dkrbtÂ |tjÂ¡}|ddâ€¦ddâ€¦ddâ€¦f }|ddâ€¦ddâ€¦df d }
tddÆ’D ]'}|
ddâ€¦ddâ€¦|f d |
  |ddâ€¦ddâ€¦|f |
  |
ddâ€¦ddâ€¦|f< qÂ|
|||| â€¦|||	 â€¦f< |S )ze
        Overlays an image (overlay) onto another image (background) at the position (x, y).
        r,   r   z9Overlay image goes out of bounds of the background image.Ng     Ã o@r   r   )rW   r   ÃšcvtColorÃšCOLOR_BGR2BGRAÃš
ValueErrorÃšrange)r%   Ãš
backgroundrs   ÃšxÃšyZbg_hZbg_wZ
bg_channelsZol_hZol_wZ
ol_channelsre   Z
overlay_imgZ
alpha_maskÃšcr'   r'   r(   Ãš
overlay_imageÂ    s&   LzCVApp.overlay_imageNc           
       C   sÃ”  |r|| _ 	 | j Â Â¡ \}}|sqtÂ |dÂ¡}| jj|ddÂ\}}| jr(| Â  |Â¡}|ÂrF| jÂ |Â¡}| jÂ 	|d Â¡}|d d |d d  } }|d d |d d  }	}
|d rÅ¾|d  rÅ¾tÂ 
|| |f|	|
fd	d
Â¡ d
|   k rrdk rn n
d
|  k r~dk sâ„¢n d
|	  k râ€°dk rÅ“n ÂqFd
|
  k râ€“dk rÅ“n ÂqFd| _ÂnÂ¨|d ÂrF|d  ÂsFtÂ 
|| |fdddÂ¡ | jrÃ¶d|   k rÃ€dk sÃn d|	  k rÃ‹dk rÃ³n n&d|  k rÃ—dk rÃ n n | Â | j Â¡ qÃ¶d|  k rÃªdk rÃ²n qÃ¶tÂ 
Â¡  d S nd| _d|   k Ârdk Âr'n n#d|  k Ârdk Âr'n ntÂ 
Â¡  | Â Â¡  | jÂ | j Â¡ | Â Â¡  Ând|   k Âr3dk ÂrWn n"d|  k ÂrAdk ÂrWn ntÂ 
Â¡  | Â Â¡  | jÂ | j Â¡ | Â Â¡  nÃ¯d|   k Ârcdk Ârâ€¡n n"d|  k Ârqdk Ârâ€¡n ntÂ 
Â¡  | Â Â¡  | jÂ | j Â¡ | Â Â¡  nÂ¿d|   k Ârâ€œdk ÂrÂ·n n"d|  k ÂrÂ¡dk ÂrÂ·n ntÂ 
Â¡  | Â Â¡  | jÂ | j Â¡ | Â Â¡  nÂd|   k ÂrÃƒdk ÂrÃ§n n"d|  k ÂrÃ‘dk ÂrÃ§n ntÂ 
Â¡  | Â Â¡  | jÂ | j Â¡ | Â Â¡  n_d|   k ÂrÃ³dk Ârn n"d|  k Ârdk Ârn ntÂ 
Â¡  | Â Â¡  | jÂ | j Â¡ | Â Â¡  n/d|   k Âr#dk ÂrFn n!d|  k Âr1dk ÂrFn ntÂ 
Â¡  | Â Â¡  | jÂ | j Â¡ | Â Â¡  | Â |Â¡ | Â || jddÂ¡}tÂ d|Â¡ tÂ dÂ¡ | jÂritÂ 
Â¡  d S q)NTr   F)ÃšflipTyper   Ã©   r,   Ã©   )r/   r   r/   r0   iL  i`  rm   Ã©F   Ã©   r5   r1   rk   rl   rO   rP   r-   r.   rR   r*   r6   rQ   i8  r4   rI   ) r   r9   r   r:   r   Ãš	findHandsr    rt   ÃšfindPositionÃš	fingersUpri   rA   rw   rv   rN   r   Ãšrunr   Ãšdrawr   r   Z	play_gamer   r   r   Z run_apprj   râ‚¬   r#   rD   rE   r   )
r%   r   rH   rI   ÃšhandsÃšlmlistÃš fingersr_   r`   ra   rb   r'   r'   r(   râ€°   Ã‡   sâ€   
bâ‚¬.Ã¾88
8
8
8
8
8

Â¯z	CVApp.runru   )
Ãš__name__Ãš
__module__Ãš__qualname__r)   rN   rj   rt   rw   râ‚¬   râ€°   r'   r'   r'   r(   r
      s    )<'r
   Ãš__main__)r   r8   Ãšnumpyr<   Zcvzone.HandTrackingModuler   r   ZVolume_Control.volume_controlr   ZPain_App.paint_appr   Z!Presentation_App.presentation_appr   ZPong_Game.pong_appr   ZVirtual_Mouse.virtual_mouser    ZMath_AI.math_AI_appr   Ãš!Virtual_Keyboard.virtual_keyboardr	   ZFitness_Tracker.fitness_trackerr
   rT   r
   rÅ½   Ãšapprâ€°   r'   r'   r'   r(   Ãš<module>   s(      Ã¾
